<!DOCTYPE html>
<html lang="en">
<head>
    <title>Alt-Text.org</title>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <link rel="icon" href="favicon/favicon.ico"/>
    <link rel="stylesheet" href="style/common.css">
    <link rel="stylesheet" href="style/sign-up.css">

    <script>
        async function redirectToTwitter() {
            const redirUrl = await fetch("https://api.alt-text.org//v1/alt-library/sign-up")
                .then(async resp => {
                    if (resp.ok) {
                        const json = await resp.json()
                        return json.auth_url
                    } else {
                        console.log(`Couldn't get auth URL: ${resp.status} ${resp.statusText}`)
                        return null
                    }
                }).catch(err => {
                    console.log("Failed to fetch auth URL")
                    console.log(err)
                    return null
                })

            if (redirUrl) {
                document.location.href = redirUrl
            } else {
                alert("Error attempting to begin signup process, please contact admin@alt-text.org or @AltTextOrg on Twitter.")
            }
        }
    </script>
</head>
<body>

<div class="header-wrapper">
        <span class="header-contents">
            <a class="site-title" href="https://alt-text.org">Alt-Text.org</a>
        </span>
</div>

<div class="content">
    <div class="content-wrapper">
        <div class="sign-up-headline">Help Fill The Library</div>
        <div class="sign-up-explanation">
            Would you like all the image descriptions you write to be automatically saved in the alt-text.org database?
            Click "Sign Up" and give us permission, and we'll start right away!
        </div>
        <div class="sign-up-controls">
            <button class="big-button" onclick="redirectToTwitter()">Sign Up</button>
            <br/>
            <button class="std-button" onclick="document.location.href='/'">Return To Search</button>
        </div>
    </div>
</div>

<div class="footer-wrapper">
    <a class="footer-link" href="mailto:admin@alt-text.org">Contact Us</a>
</div>

</body>
</html>